!function(e){"use strict";function a(e,a){if("function"==typeof window.trackMetrics)try{window.trackMetrics({type:"social-click",data:{clickObj:{socialType:"social: "+e,headline:a}}})}catch(i){}}function i(i,o){e.each(i.providers.split(","),function(t,n){a(n,o.title),e.ajax({url:CNN.SocialConfig.gigya.shareStatsPostURL||"",dataType:"json",type:"POST",data:{actionType:"socialShare",socialType:n||"",headline:o.title||"",shortUrl:i.targetURL||"",url:window.location.href||"",env:CNN.contentModel.env||""}})})}function o(e){var a=p||f;a?(a=t(a,e),n(a,e)):window.console&&console.error&&console.error("No canonical share widget has been defined")}function t(e,a){var i=e.clone();return a&&a.url&&i.setLinkBack(a.url),i}function n(a,o){var t,n,r,d,c=CNN.msib.cfg.gigya;o=o||{},"undefined"!=typeof o.elem&&"undefined"!=typeof o.elem.data("isshorturl")&&(v=o.elem.data("isshorturl")),n=e("<div>").attr("data-js-gigya-share","wrapper").appendTo("body"),r=s(n),d=v?"never":"whenRequired",t={deviceType:"auto",wrap:!0,operationMode:"simpleShare",containerID:r,userAction:a,moreEnabledProviders:c.enabledProviders+","+c.moreEnabledProviders,shortURLs:d,onSendDone:function(e){i(e,a)}},gigya.socialize.showShareUI(t),window.setTimeout(function(){n.attr("data-js-gigya-share-fade","")},10),window.setTimeout(function(){n.attr("data-js-gigya-share-active","")},300)}function r(e){var a,i=e.data("canonical"),o=e.data("user-message"),t=e.data("link"),n=e.data("title"),r=e.data("subtitle"),s=e.data("description"),d=e.data("image-src"),c=new gigya.socialize.UserAction;return o&&c.setUserMessage(o),t&&(c.setLinkBack(t),c.addActionLink("Read More",t)),n&&c.setTitle("CNN: "+n),r&&c.setSubtitle(r),s&&c.setDescription(s),d&&(a={type:"image",src:d},t&&(a.href=t),c.addMediaItem(a)),"undefined"!=typeof i&&(p=c),v=e.data("isshorturl"),c}function s(e){var a=e.attr("id");if("undefined"==typeof a||""===a){do a="gigyaShareBar_"+w,w+=1;while(document.getElementById(a));e.attr("id",a)}return a}function d(a,o,t){var n,r,d=CNN.msib.cfg.gigya,c=e("<div>"),l=s(c),h=d.showCounts,u="gigya-sharebar-element";y>3&&(u+=" gigya-element-large"),c.addClass(u).appendTo(o),y+=1,"none"===h&&"Facebook-Like"===a&&(h="right"),n=v?"never":"Facebook"===a?"never":"whenRequired",void 0!==d.providerCfg[a]?(d.providerCfg[a].provider=a,r=[d.providerCfg[a]]):r=a,gigya.socialize.showShareBarUI({deviceType:"auto",operationMode:"simpleShare",containerID:l,showCounts:h,userAction:t,shareButtons:r,moreEnabledProviders:d.moreEnabledProviders,shortURLs:n,useEmailCaptcha:!1,showEmailButton:!0,emailBody:"$userMsg$<br /><br />I thought you'd like this:<br />$URL$<br /><br />$title$<br />$description$<br />",useHTML:!0,onSendDone:function(e){i(e,t)}})}function c(e){var a,i=CNN.msib.cfg.gigya.shareButtons.split(","),o=r(e),t=i.length;for(y=1,"undefined"==typeof f&&(f=o),a=0;t>a;a++)d(i[a],e,o)}function l(e){var a=r(e);e.on("click",function(){n(a,{elem:e})}),e.show()}function h(a){var i=e(".js-gigya-sharebar"),o=e(".js-gigya-share");(i.length||o.length)&&(g=a,CNN.msib.loadGigya(function(e){u(e,i,o)}))}function u(a,i,o){return!a&&console&&console.error?void console.error("Gigya not loaded -- share bar disabled."):(i.each(function(){c(e(this))}),void o.each(function(){l(e(this))}))}var g,f,p,y,w=0,v=!1;e(window).load(function(){var a,i,o=e(".share-bar-whatsapp-container"),t=(e(window).width(),0),n=0;if(o.length)if(e("html").hasClass("mobile")&&e("html").hasClass("phone"))for(a=e(".gigya-sharebar-element"),i=0;i<a.length;i++)(3==i||5==t)&&(e(a[i]).after(e(o[n])),e(o[n]).show(),t=0,n++),t++;else e(o).hide()}),e(function(){CNN.msib.onInitialized(h)}),window.CNN=window.CNN||{},CNN.gigyaShareBar=function(){CNN.msib.onInitialized(h)},CNN.share=CNN.share||{},CNN.share.popup=o}(jQuery);
//# sourceMappingURL=gigya-sharebar.min.js.map